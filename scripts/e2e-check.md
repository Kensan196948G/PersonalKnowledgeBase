# Phase 1 MVP - E2E動作確認チェックリスト

Phase 1 MVP完了のための包括的な動作確認手順書です。各項目を順番に確認してください。

## 前提条件

- Node.js 20.x以上がインストール済み
- 依存パッケージがインストール済み (`npm install`)
- Prismaクライアント生成済み (`npx prisma generate`)
- データベース初期化済み (`npx prisma db push`)

---

## 1. 環境セットアップ確認

### 1.1 依存パッケージ
- [ ] `npm install` が正常に完了する
- [ ] エラーメッセージが表示されない

### 1.2 データベース
- [ ] `data/` ディレクトリが存在する
- [ ] `data/knowledge.db` が存在する
- [ ] `data/attachments/` ディレクトリが存在する

### 1.3 TypeScript型チェック
- [ ] `npm run typecheck` がエラーなく完了する

### 1.4 ビルド確認
- [ ] `npm run build:frontend` が成功する
- [ ] `npm run build:backend` が成功する

---

## 2. 開発サーバー起動

### 2.1 サーバー起動
- [ ] `npm run dev` を実行
- [ ] フロントエンドとバックエンドが両方起動する
- [ ] エラーメッセージが表示されない

### 2.2 フロントエンドアクセス
- [ ] http://localhost:5173 にアクセスできる
- [ ] ページが正常にレンダリングされる
- [ ] コンソールエラーが表示されない

### 2.3 バックエンドAPI確認
- [ ] http://localhost:3001/api/health にアクセスして `{"status":"ok"}` が返る
- [ ] ターミナルにAPIサーバー起動メッセージが表示される

---

## 3. ノート基本機能

### 3.1 ノート作成
- [ ] 「新規ノート」ボタンが表示される
- [ ] 「新規ノート」ボタンをクリックすると新規ノートが作成される
- [ ] 新規ノートのタイトルが「無題のノート」になっている
- [ ] エディタエリアが表示される

### 3.2 タイトル編集
- [ ] タイトル入力フィールドをクリックして編集できる
- [ ] タイトルを変更すると自動保存される（デバウンス後）
- [ ] 保存成功のトーストが表示される
- [ ] ノート一覧のタイトルが更新される

### 3.3 コンテンツ編集
- [ ] エディタエリアでテキスト入力ができる
- [ ] 改行が正常に動作する
- [ ] 日本語入力が正常に動作する
- [ ] 編集内容が自動保存される（デバウンス後）
- [ ] 保存成功のトーストが表示される

### 3.4 ノート切り替え
- [ ] ノート一覧から別のノートをクリックできる
- [ ] ノートが切り替わり、内容が正しく表示される
- [ ] 編集中の内容が失われない（自動保存確認）

---

## 4. テキストフォーマット機能

### 4.1 基本フォーマット
- [ ] **太字** - Ctrl+B またはツールバーボタンで適用できる
- [ ] *斜体* - Ctrl+I またはツールバーボタンで適用できる
- [ ] 取り消し線 - ツールバーボタンで適用できる
- [ ] `インラインコード` - ツールバーボタンで適用できる

### 4.2 見出し
- [ ] H1見出し - ツールバーから適用できる
- [ ] H2見出し - ツールバーから適用できる
- [ ] H3見出し - ツールバーから適用できる
- [ ] 見出しが視覚的に区別できる（フォントサイズ・太字）

### 4.3 リスト
- [ ] 箇条書きリスト - ツールバーから作成できる
- [ ] 番号付きリスト - ツールバーから作成できる
- [ ] Enterキーで新しいリスト項目が追加される
- [ ] Tabキーでインデント（ネスト）できる

### 4.4 タスクリスト
- [ ] タスクリスト - ツールバーから作成できる
- [ ] チェックボックスをクリックしてON/OFFできる
- [ ] チェック状態が保存される

### 4.5 コードブロック・引用
- [ ] コードブロック - ツールバーから挿入できる
- [ ] コードブロック内でコードが等幅フォントで表示される
- [ ] 引用ブロック - ツールバーから挿入できる
- [ ] 引用が視覚的に区別できる（左ボーダー等）

### 4.6 水平線
- [ ] 水平線 - ツールバーから挿入できる
- [ ] 水平線が視覚的に表示される

---

## 5. 画像貼り付け機能

### 5.1 クリップボードから画像貼り付け
- [ ] 画像をクリップボードにコピーする（スクリーンショット等）
- [ ] エディタ内でCtrl+Vを押す
- [ ] 画像がエディタ内に表示される
- [ ] 画像が `data/attachments/` に保存される
- [ ] ファイル名が `{timestamp}-{random}.{ext}` 形式になっている

### 5.2 画像表示
- [ ] 貼り付けた画像が正しく表示される
- [ ] 複数の画像を貼り付けても全て表示される
- [ ] 画像のアスペクト比が保たれる

### 5.3 画像の永続化
- [ ] ノートを保存後、ページをリロードする
- [ ] 画像が引き続き表示される
- [ ] 画像URLが `/api/attachments/{filename}` 形式になっている

### 5.4 画像API
- [ ] 画像URLに直接アクセスして画像が表示される
- [ ] 存在しない画像URLは404エラーになる

---

## 6. ノート一覧・検索機能

### 6.1 ノート一覧表示
- [ ] 作成したノートが一覧に表示される
- [ ] タイトルが表示される
- [ ] 作成日時・更新日時が表示される
- [ ] コンテンツのプレビュー（最初の数行）が表示される

### 6.2 検索機能
- [ ] 検索バーが表示される
- [ ] 検索バーにテキストを入力すると、該当ノートが絞り込まれる
- [ ] タイトルで検索できる
- [ ] コンテンツで検索できる
- [ ] 検索結果がリアルタイムに更新される（デバウンス処理）
- [ ] 検索ボックスをクリアすると全ノートが表示される

### 6.3 ソート機能
- [ ] ソートドロップダウンが表示される
- [ ] 「更新日時（新しい順）」でソートできる
- [ ] 「更新日時（古い順）」でソートできる
- [ ] 「作成日時（新しい順）」でソートできる
- [ ] 「作成日時（古い順）」でソートできる
- [ ] 「タイトル（A-Z）」でソートできる
- [ ] 「タイトル（Z-A）」でソートできる
- [ ] ソート順が即座に反映される

---

## 7. ノート削除機能

### 7.1 削除実行
- [ ] ノート一覧の削除ボタンが表示される
- [ ] 削除ボタンをクリックすると確認ダイアログが表示される
- [ ] 「キャンセル」を選択すると削除されない
- [ ] 「削除」を選択するとノートが削除される
- [ ] 削除後、ノート一覧から消える

### 7.2 削除後の動作
- [ ] 削除成功のトーストが表示される
- [ ] 現在開いているノートが削除された場合、別のノートまたは空白画面に切り替わる
- [ ] データベースから削除される（再読み込み後も表示されない）

---

## 8. 自動保存・デバウンス

### 8.1 自動保存
- [ ] タイトルを編集後、1秒程度で自動保存される
- [ ] コンテンツを編集後、1秒程度で自動保存される
- [ ] 保存中は「保存中...」等のインジケーターが表示される（オプション）
- [ ] 保存完了後、トーストが表示される

### 8.2 デバウンス
- [ ] 連続して入力しても、入力停止後に1回だけ保存される
- [ ] 保存APIが連続して呼ばれない（ネットワークタブで確認）

---

## 9. UI/UX

### 9.1 レイアウト
- [ ] ヘッダーが表示される
- [ ] サイドバー（ノート一覧）が表示される
- [ ] メインエディタエリアが表示される
- [ ] レスポンシブデザインが適用されている（ウィンドウサイズ変更時）

### 9.2 ツールバー
- [ ] エディタツールバーが表示される
- [ ] 各ボタンにアイコンまたはテキストが表示される
- [ ] ボタンにホバー効果がある
- [ ] アクティブなフォーマットがハイライトされる

### 9.3 トースト通知
- [ ] 保存成功時にトーストが表示される
- [ ] 削除成功時にトーストが表示される
- [ ] エラー時にトーストが表示される
- [ ] トーストが数秒後に自動で消える

### 9.4 エラーハンドリング
- [ ] ネットワークエラー時にユーザーにエラーメッセージが表示される
- [ ] 不正なデータ入力時にバリデーションエラーが表示される

---

## 10. データ永続化

### 10.1 リロード後の確認
- [ ] ページをリロード（F5）しても、ノート一覧が表示される
- [ ] リロード後も、編集内容が保持されている
- [ ] リロード後も、画像が表示される

### 10.2 データベース確認
- [ ] Prisma Studioを起動 (`npm run db:studio`)
- [ ] `Note` テーブルにノートが保存されている
- [ ] タイトル、コンテンツ、作成日時、更新日時が正しい

### 10.3 ファイルシステム確認
- [ ] `data/knowledge.db` ファイルが存在する
- [ ] `data/attachments/` に画像ファイルが保存されている
- [ ] 画像ファイル名が予期した形式になっている

---

## 11. パフォーマンス

### 11.1 初期読み込み
- [ ] ページ初期表示が1秒以内に完了する
- [ ] ノート一覧の読み込みが速い（100件以下の場合）

### 11.2 エディタ動作
- [ ] テキスト入力時にラグがない
- [ ] フォーマット適用が瞬時に反映される
- [ ] 画像貼り付けが1秒以内に表示される

### 11.3 検索・ソート
- [ ] 検索結果が瞬時に表示される（50件以下の場合）
- [ ] ソート順変更が瞬時に反映される

---

## 12. ブラウザ互換性

### 12.1 Chrome/Edge
- [ ] 全機能が正常に動作する

### 12.2 Firefox
- [ ] 全機能が正常に動作する
- [ ] 画像貼り付けが動作する

### 12.3 Safari（Mac環境の場合）
- [ ] 全機能が正常に動作する
- [ ] 画像貼り付けが動作する

---

## 13. テスト実行

### 13.1 ユニットテスト
- [ ] `npm test` が全てパスする
- [ ] テストカバレッジが表示される

### 13.2 Lint・フォーマット
- [ ] `npm run lint` がエラーなく完了する
- [ ] `npm run typecheck` がエラーなく完了する

---

## チェックリスト完了基準

以下の全てが満たされた場合、Phase 1 MVPは完了とみなします:

- [ ] セクション1-13の全項目が完了
- [ ] 重大なバグが存在しない
- [ ] ユニットテストが全てパスする
- [ ] TypeScript型エラーが存在しない
- [ ] 開発者ドキュメント（このチェックリスト）が整備されている

---

## 既知の問題・制限事項

このセクションには、確認中に発見された既知の問題を記録してください。

| 問題 | 影響度 | 対応予定 |
|------|--------|----------|
| （例）画像が大きすぎると表示が遅い | 低 | Phase 2で画像最適化を実装 |

---

## 次のステップ（Phase 2準備）

Phase 1完了後、以下の準備を行います:

- [ ] Phase 2要件定義（タグ機能、フォルダ構造）
- [ ] Phase 1で発見された改善点のバックログ化
- [ ] パフォーマンス最適化の検討
- [ ] E2Eテスト自動化の検討（Playwright）

---

**最終確認日**: _________
**確認者**: _________
**Phase 1 MVP ステータス**: [ ] 完了 / [ ] 未完了
